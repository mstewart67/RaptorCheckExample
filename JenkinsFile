/* Declarative Pipeline
 * 
 * 
 */
pipeline {
    agent any

    stages {
        stage('Set Raptor-Dev version') {
            steps {
                bat '"C:\\Program Files (x86)\\NewEagle\\Raptor\\raptor_conf_editor" CONFIG m:2023a.64 r:2024a_0.9.15337'
            }
        }

        stage('Setup build enviroment') {
            steps {
                runMATLABCommand(command: 'setup_build')
            }       
        }

        stage('Build Model') {
            steps {
                runMATLABCommand(command: 'slbuild(\'RaptorCheckExample\', 'ForceTopModelBuild', true);')
            }       
        }

        stage('Run Static Analysis') {
            steps {
                runMATLABCommand(command: 'raptor_stack_check_run(\'RaptorCheckExample\');')
            }       
        }        
    }
    // post {
    //     success {
    //         /* Grab Artifacts from Build */
    //     }
    // }
}